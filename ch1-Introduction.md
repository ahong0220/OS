# 作業系統的功能:
作業系統是使用者與硬體之間的介面，負責分配與管理資源、解決衝突並監控程式執行，以提供方便、安全且有效率的運作環境。

# 電腦系統的組成:
電腦系統是由 CPU、記憶體與多個裝置控制器所構成，它們透過系統匯流排(System Bus)互相連接並共享記憶體。
- 一個系統可能包含一個或多個CPU。
- 每個控制器負責管理特定裝置，且都有對應的驅動程式(Driver)。
- 不同裝置可同時運作，但會互相競爭記憶體的存取權。

## 裝置控制器(Device Controller):
- 屬於硬體。
- 負責控制特定的I/O裝置。
- 內含：
  - 特殊用途暫存器(special-purpose registers)：存放控制與狀態資訊。
  - 本地緩衝區(local buffer)：暫存資料以便與記憶體交換。
- CPU不直接控制裝置，而是透過控制器進行資料傳輸與命令執行。

## 裝置驅動程式(Device Driver):
- 屬於軟體，為作業系統的一部份。
- 每個控制器都有對應的驅動程式。
- 驅動程式負責將OS的高階命令轉換成控制器能理解的低階指令。

## 電腦系統運作的三個關鍵:
- 中斷(Interrupt): 讓CPU在執行指令時能被外部事件打斷並即時處理。
- 儲存體結構(Storage Structure): 確保資料能在CPU、記憶體與外部裝置間正確傳遞。
- I/O結構(Input/Output Structure): 管理裝置之間的資料交換與控制訊號。

1. ## 中斷(Interrupt):
- 定義: 中斷是硬體或軟體事件發生時，發送給CPU的訊號，用來要求暫停目前工作並優先處理該事件。
- 目的: 讓CPU不必一直等待裝置完成任務，提高效率；使系統能即時回應外部事件。
- 運作流程:
  1. Device Controller偵測到事件，發出IRQ(中斷請求)。
  2. CPU停止目前指令的執行，保存現有狀態。
  3. CPU透過中斷向量表(IVT)找出對應的中斷服務程式。
  4. OS中的IRS處理該事件(如讀取資料、重設狀態)。
  5. IRS結束，CPU恢復原先執行狀態並繼續原程式。
- 系統元件:
  1. IRQ(Interrupt Request Line): 硬體線路，用來傳送中斷請求。
  2. PIC(Programmable Interrupt Controller): 管理多個IRQ的輸入，負責排序、篩選並傳送中斷給CPU。
  3. IVT(Interrupt Vector Table): 記錄各種中斷對應的IRS位址，供CPU查找。
  4. ISR(Interrupt Service Routine): 實際的中斷處理程式，由OS執行。
- 重點概念:
  - 硬體中斷: 由外部裝置(如鍵盤、磁碟)產生。
  - 軟體中斷: 由程式主動觸發，用於系統呼叫或例外處理。
  - 優點: 提升系統反應速度與資源利用率。
- # 總結: 中斷是讓CPU能即時回應外部事件、保持系統高效運作的核心機制。
  
